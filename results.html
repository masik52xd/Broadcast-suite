<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Multi-Game Match Result Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #bc13fe;
            --bg-dark: #0a0518;
            --neon-blue: #00f2ff;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: #0f172a;
            color: white;
            display: flex;
            margin: 0;
            height: 100vh;
            overflow: hidden;
        }

        /* Controls Panel */
        .controls {
            width: 380px;
            background: #1e293b;
            padding: 20px;
            overflow-y: auto;
            border-right: 3px solid var(--accent);
            box-shadow: 10px 0 30px rgba(0,0,0,0.5);
        }

        .input-group { margin-bottom: 12px; }
        label { display: block; font-size: 11px; color: #94a3b8; text-transform: uppercase; margin-bottom: 4px; font-weight: bold; }
        input, select {
            width: 100%;
            background: #0f172a;
            border: 1px solid #334155;
            color: white;
            padding: 10px;
            border-radius: 6px;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        .download-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #bc13fe, #7a12f5);
            border: none;
            color: white;
            font-weight: 900;
            cursor: pointer;
            border-radius: 8px;
            text-transform: uppercase;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(188, 19, 254, 0.4);
        }

        /* Preview Area */
        .preview-area {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #0a0a0a;
            overflow: auto;
            padding: 40px;
        }

        #graphic-export {
            width: 1080px;
            height: 1080px;
            background: linear-gradient(135deg, #0f0524 0%, #2b0b4d 50%, #0f0524 100%);
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 80px 40px;
            box-sizing: border-box;
            box-shadow: 0 0 100px rgba(0,0,0,1);
        }

        .tournament-name { 
            font-family: 'Orbitron', sans-serif; 
            font-size: 72px; 
            font-weight: 900; 
            text-align: center;
            margin: 0;
            background: linear-gradient(to bottom, #fff 40%, #bc13fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
        }

        .sub-header { font-size: 36px; color: #cbd5e1; margin-top: 15px; letter-spacing: 4px; }

        .teams-main {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 50px;
            margin: 80px 0;
            width: 100%;
        }

        .team-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(188, 19, 254, 0.2);
            padding: 30px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 25px;
            min-width: 320px;
            backdrop-filter: blur(10px);
        }

        .team-logo { width: 140px; height: 140px; object-fit: contain; }
        .team-name { font-size: 54px; font-weight: 700; text-transform: uppercase; }

        .score-display {
            font-family: 'Orbitron', sans-serif;
            font-size: 130px;
            font-weight: 900;
            text-shadow: 0 0 30px rgba(188, 19, 254, 0.8);
        }

        .maps-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            width: 100%;
            flex-wrap: wrap;
        }

        .map-box {
            background: rgba(0, 0, 0, 0.4);
            border-top: 5px solid var(--accent);
            padding: 20px;
            min-width: 180px;
            text-align: center;
            border-radius: 0 0 12px 12px;
            transition: 0.3s;
        }

        .map-n { color: var(--neon-blue); font-size: 22px; font-weight: bold; text-transform: uppercase; margin-bottom: 8px; }
        .map-s { font-size: 42px; font-weight: 700; font-family: 'Orbitron'; }

        .footer {
            position: absolute;
            bottom: 60px;
            text-align: center;
        }

        .watermark { 
            font-family: 'Orbitron'; 
            font-size: 32px; 
            letter-spacing: 6px; 
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 15px;
            color: #f8fafc;
        }
        .game-name { font-size: 20px; color: var(--accent); margin-top: 8px; font-weight: bold; text-transform: uppercase; }
    </style>
</head>
<body>

<div class="controls">
    <h2 style="color: var(--accent)">⚙️ GENERATOR</h2>
    
    <div class="input-group">
        <label>Tournament</label>
        <input type="text" id="in-tour" value="BSL OPEN CUP 2025" oninput="update()">
    </div>

    <div class="input-group">
        <label>Date / Format</label>
        <input type="text" id="in-date" value="21.01.2026 | BO3" oninput="update()">
    </div>

    <div class="input-group">
        <label>Map Count (Format)</label>
        <select id="in-format" onchange="changeFormat()">
            <option value="1">BO1</option>
            <option value="2">BO2</option>
            <option value="3" selected>BO3</option>
            <option value="5">BO5</option>
        </select>
    </div>

    <div style="display:flex; gap:10px">
        <div class="input-group">
            <label>Team 1</label>
            <input type="text" id="in-t1" value="SMFIX" oninput="update()">
            <input type="file" onchange="loadLogo(event, 'logo1')" style="margin-top:5px; font-size:10px">
        </div>
        <div class="input-group">
            <label>Team 2</label>
            <input type="text" id="in-t2" value="TRUE." oninput="update()">
            <input type="file" onchange="loadLogo(event, 'logo2')" style="margin-top:5px; font-size:10px">
        </div>
    </div>

    <div class="input-group">
        <label>Total Score (e.g. 2:0)</label>
        <input type="text" id="in-score" value="2:0" oninput="update()">
    </div>

    <hr style="border: 0; border-top: 1px solid #334155; margin: 20px 0;">
    
    <div id="maps-inputs-container">
        <!-- JS will add map fields here -->
    </div>

    <div class="input-group" style="margin-top:20px">
        <label>Game</label>
        <input type="text" id="in-game" value="Counter-Strike 2" oninput="update()">
    </div>

    <div class="input-group">
        <label>Your Watermark</label>
        <input type="text" id="in-mark" value="HEADSHOT GENERATOR" oninput="update()">
    </div>

    <button class="download-btn" onclick="saveImage()">Save as PNG</button>
</div>

<div class="preview-area">
    <div id="graphic-export">
        <h1 class="tournament-name" id="out-tour">BSL OPEN CUP 2025</h1>
        <div class="sub-header" id="out-date">21.01.2026 | BO3</div>

        <div class="teams-main">
            <div class="team-card">
                <span class="team-name" id="out-t1">SMFIX</span>
                <img src="https://via.placeholder.com/150" id="logo1" class="team-logo">
            </div>

            <div class="score-display" id="out-score">2:0</div>

            <div class="team-card">
                <img src="https://via.placeholder.com/150" id="logo2" class="team-logo">
                <span class="team-name" id="out-t2">TRUE.</span>
            </div>
        </div>

        <div class="maps-grid" id="out-maps-container">
            <!-- Maps will appear here -->
        </div>

        <div class="footer">
            <div class="watermark" id="out-mark">HEADSHOT GENERATOR</div>
            <div class="game-name" id="out-game">COUNTER-STRIKE 2</div>
        </div>
    </div>
</div>

<script>
    const defaultMaps = ["ANUBIS", "DUST 2", "MIRAGE", "INFERNO", "NUKE"];

    function changeFormat() {
        const count = parseInt(document.getElementById('in-format').value);
        const inputArea = document.getElementById('maps-inputs-container');
        inputArea.innerHTML = '<h3>Map Results</h3>';

        for (let i = 1; i <= count; i++) {
            inputArea.innerHTML += `
                <div class="input-group" style="display:flex; gap:5px">
                    <input type="text" id="in-m${i}-n" value="${defaultMaps[i-1] || 'MAP '+i}" oninput="update()" placeholder="Map">
                    <input type="text" id="in-m${i}-s" value="-" oninput="update()" placeholder="Score" style="width:70px">
                </div>
            `;
        }
        update();
    }

    function update() {
        // Base texts
        document.getElementById('out-tour').innerText = document.getElementById('in-tour').value;
        document.getElementById('out-date').innerText = document.getElementById('in-date').value;
        document.getElementById('out-t1').innerText = document.getElementById('in-t1').value;
        document.getElementById('out-t2').innerText = document.getElementById('in-t2').value;
        document.getElementById('out-score').innerText = document.getElementById('in-score').value;
        document.getElementById('out-game').innerText = document.getElementById('in-game').value;
        document.getElementById('out-mark').innerText = document.getElementById('in-mark').value;

        // Update maps in preview
        const count = parseInt(document.getElementById('in-format').value);
        const outContainer = document.getElementById('out-maps-container');
        outContainer.innerHTML = '';

        for (let i = 1; i <= count; i++) {
            const mName = document.getElementById(`in-m${i}-n`).value;
            const mScore = document.getElementById(`in-m${i}-s`).value;
            
            const card = document.createElement('div');
            card.className = 'map-box';
            // If more than 3 maps, reduce font size slightly
            if (count > 3) card.style.minWidth = '160px';
            
            card.innerHTML = `
                <div class="map-n">${mName}</div>
                <div class="map-s">${mScore}</div>
            `;
            outContainer.appendChild(card);
        }
    }

    function loadLogo(event, imgId) {
        const reader = new FileReader();
        reader.onload = () => { document.getElementById(imgId).src = reader.result; };
        reader.readAsDataURL(event.target.files[0]);
    }

    function saveImage() {
        const el = document.getElementById('graphic-export');
        html2canvas(el, { scale: 2 }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'match-result-pro.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    // Initialization
    changeFormat();
</script>

</body>
</html>